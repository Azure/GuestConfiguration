environment:
  host:
    os: 'windows'
    flavor: 'server'
    version: '2019'
  runtime:
    provider: 'appcontainer'
    image: 'cdpxwin1809.azurecr.io/global/vse2019:latest'
    source_mode: 'link'

# signing_options:
#   profile: 'internal_azure_service'
#   codesign_validation_glob_pattern: 'regex|.+(?:so|sh)$;-:file|**/*.zip*/**'

version:
  name: 'First version'
  major: 1
  minor: 0
  system: 'patch'

restore:
  commands:
    - !!defaultcommand
      name: 'Install packages'
      command: '.cdpx_scripts\restore.cmd'
      fail_on_stderr: false

build:
  commands:
    - !!buildcommand
      name: 'Build Windows '
      command: '.cdpx_scripts\build.cmd'
      fail_on_stderr: true
      artifacts:
        - from: 'build'
          to: 'out'
          include:
            - '**/*'
          # signing_options: # <<<<<<<<<<<<<<<<<<<<<<<<<<< New Line for Inline Signing
            # sign_inline: true #/ <<<<<<<<<<<<<<<<<<<<<<<< New Line for Inline Signing


package:
  commands:
    - !!defaultcommand
      name: 'Package Guest Configuration Windows Agent'
      command: '.cdpx_scripts\package.cmd'
      fail_on_stderr: false
